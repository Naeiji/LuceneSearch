copyright 2014 chep xda artemchep gmail com program free softwar redistribut modifi term gnu gener licens publish free softwar foundat either version licens option later version program distribut hope us without warranti without even impli warranti merchant fit particular purpos see gnu gener licens detail receiv copi gnu gener licens along program write free softwar foundat inc 51 franklin street fifth floor boston 02110 1301 usa com achep acdisplai notif annot suppress lint notif manag content context handler looper system clock servic notif statu bar notif support annot non support annot nullabl text text util util log com achep acdisplai com achep acdisplai config com achep acdisplai blacklist config com achep acdisplai blacklist blacklist com achep base heap com achep base devic com achep base content config base com achep base interfac low memori com achep base interfac subscript com achep base test check com achep base util java lang ref weak refer java util arrai list java util hash java util iter java util list java util com achep base build debug creat artem 27 12 13 notif present notif list notif list chang subscript notif present notif list chang low memori tag notif present wake lock tag notif pool post remov lock code filter noisi flow notif code handl notif updat normal filter noisi notif fresh notif expiri time 4000 sec flag silenc flag immedi event bath event post event chang event chang spam event remov non event name event event event post event post event chang event chang event chang spam event chang spam event remov event remov event bath event bath unknown valu result success result spam notif present notif present notif list list notif list list group summari notif post main arrai list weak refer notif list chang listen ref arrai list notif list chang frozen event freez level thread handler handler notif pr proxi proxi notif spam filter filter object monitor object handl config blacklist config config blacklist blacklist make local config config blacklist blacklist listen config updat notif list need config config base config chang min prioriti max prioriti config non config config min prioriti config notifi min prioriti max prioriti config notifi max prioriti config chang non config base config base non kei non object valu monitor check main thread config chang sync kei valu config chang sync non kei non object valu enabl kei config kei enabl rebuild local list config kei notifi min prioriti valu handl notifi prioriti chang min prioriti min prioriti config kei notifi max prioriti valu handl notifi prioriti chang max prioriti max prioriti config kei ui dynam background mode enabl bit valu config dynam bg notif mask open notif notif list enabl notif load background async notif clear background config kei ui emoticon valu open notif list emoticon enabl handl notifi prioriti chang fixm swap method work java work lower higher rebuild local list rebuild confirmatori need rebuild non open notif prioriti notif prioriti prioriti lower && prioriti higher blacklist blacklist blacklist chang blacklist chang non config config non config config old diff hidden config hidden hidden old config old hidden non clearabl enabl config non clearabl enabl non clearabl enabl old config old non clearabl enabl check someth import chang hidden hidden old || non clearabl enabl non clearabl enabl old monitor todo check main thread handl visibl chang config name handl visibl chang non name rebuild local list rebuild confirmatori need rebuild non open notif name equal name rebuild confirmatori need rebuild non open notif rebuild local list non rebuild confirmatori rebuild confirmatori open notif list rebuild confirmatori need rebuild rebuild local list listen notif list chang callback list notif chang param notif must non event link event bath code otherwis param event event type link event post link event remov link event chang link event chang spam link event bath param last event sequenc code last bath chang code otherwis notif list chang non notif present np open notif event last event sequenc inherit doc regist non notif list chang make sure regist weak refer notif list chang ref listen ref ref log tag tri regist alreadi regist clean dead listen listen ref add weak refer inherit doc unregist non notif list chang weak refer notif list chang ref listen ref ref listen ref remov ref log tag tri unregist non exist ideal method whole weak thing need clean dead listen iter weak refer notif list chang listen ref iter next weak refer wr next wr log tag remov dead remov author artem chepurnoi notif post see post notif main content context open notif see post notif content context open notif notif post non context context non open notif flag see regist notif list chang see unregist notif list chang notif post nullabl notif post main main notif present frozen event arrai list listen ref arrai list list notif list notif list notif list chang notif ad non open notif notif list result notif chang non open notif non open notif old group summari && old group summari copi past children old notif on list open notif children group notif list open notif ag old group notif children ag check children empti children add ag notif list result notif remov non open notif notif list result list notif list group summari hash handler handler looper main looper proxi notif pr proxi looper main looper filter notif spam filter devic jelli bean mr2 api pre version list maximum size list maximum size config config config config config weak listen config regist config blacklist blacklist blacklist blacklist blacklist regist blacklist non notif present notif present notif present notif present notif present inherit doc low memori list low memori cover local list notif post notif main non context context non open notif flag filter post notif valid todo implement basic spam filter proxi post notif context flag post notif global list notifi everi follow chang tri launch link com achep acdisplai ui activ ac displai creat link open notif us link open notif statu bar notif link open notif notif method see flag silenc post notif non context context non open notif flag monitor check main thread proxi post check test notif init notif context notif util dismiss notif anoth wai sure name context notif servic notif manag nm notif manag context system servic name nm cancel notifi init freez listen global valid valid global local valid group child notif ad list point load data global valid load context group summari group kei group kei group kei noinspect statement empti bodi group summari contain group kei put group children summari notif list size open notif n2 list group kei equal n2 group kei n2 group child group notif group notif add n2 remov notif global list list remov notif list remov notif n2 odd ideal never happen log tag remov notif put group children summari notif list size open notif n2 list group kei equal n2 group kei n2 group child group notif group notif add n2 remov notif global list list remov notif list remov notif n2 odd ideal never happen remov notif group summari add group kei group child && group summari contain group kei artem chepurnoi sure mai happen debug log tag ad notif exist group group kei group kei group kei open notif n2 list group kei equal n2 group kei && n2 group summari group child n2 group notif notif list n2 group notif push notif notifi listen n2 event chang group child fail find summari group although indic presenc possibl happen due optim list pend event group summari remov group kei debug log tag remov lost group group group kei config config config emoticon enabl config emoticon enabl group child global valid assum local valid local valid valid local devic jelli bean mr2 api global valid local valid list push remov notif global valid result list push remov notif local valid local valid && result result success && main debug log tag notif post notifi main main notif post context flag releas listen send pend event bit flag flag silenc frozen event clear melt listen remov notif main non open notif flag proxi remov notif flag remov notif present send event follow call method remov notif system remov notif non open notif flag monitor check main thread proxi remov updat summari group notif etc handl notif remov notif list list list list index notif recycl list remov list remov notif watch memori leak heap ref watcher watch handl notif remov non open notif group summari group kei group kei group kei group summari remov group kei group child && group summari contain group kei group kei group kei group kei open notif n2 list group kei equal n2 group kei check n2 group summari n2 group notif notif list list notif list n2 group notif list index notif recycl list remov watch memori leak heap ref watcher watch fail find summari group although indic presenc possibl happen due optim list pend event group summari remov group kei debug log tag removed2 lost group group group kei valid notif link list global list send link event bath bath event see valid local open notif see valid global open notif must sync monitor rebuild local list freez listen remov valid notif local list list size open notif list valid local list remov notif add newli valid notif local list open notif list valid local list push notif melt listen nullabl open notif fresh notif monitor open notif list delta math max notif prioriti fresh notif expiri time past system clock elaps realtim delta read && load timestamp past non arrai list open notif list monitor list number notif link list local list see empti size monitor list size code link list local list contain notif code otherwis see size empti monitor list empti local list event inherit doc enter point notif ad non open notif check recycl load notif background notifi listen event post result success inherit doc enter point notif chang non open notif non open notif old check recycl load notif background old clear background prevent god damn notif spam check text equal exampl notif spammer well known download provid serious googl number old number && text util equal titl text old titl text && text util equal titl big text old titl big text && text util equal messag text old messag text && text util equal info text old info text && mine dumb technic notif chang fault dumb develop mark notif read old on read old read notifi listen event chang spam result spam wake notifi listen event chang result success inherit doc enter point notif remov non open notif notifi listen event remov recycl notif caus recycl remov global list otherwis mai unexpect behaviour notif ad back local list recycl clear background empti clean cach debug log tag clean ref cach notif ui helper icon cach clear result success load notif background non open notif notif config config config select load exactli need noth reduc ram consumpt bit 1% bit config dynam background mode config dynam bg notif mask notif load background async notif util suppress lint api test notif non context context non open notif statu bar notif sbn statu bar notif mine && sbn && sbn notifi test suppress lint api init notif non context context non open notif statu bar notif sbn statu bar notif mine && sbn && sbn notifi init freez listen notif process store event list see melt listen freez listen freez level unfreez event send see freez listen melt listen check freez level freez level notifi listen frozen event frozen event clear notifi listen nullabl open notif event notifi listen event notifi listen nullabl open notif event last event sequenc check main thread freez level frozen event size && frozen event event event bath event event bath frozen event clear frozen event add notif list chang event listen ref size weak refer notif list chang ref listen ref notif list chang ref link except log tag delet unus listen ref remov notif list chang event last event sequenc notifi listen non arrai list notif list chang chang size chang size size notif list chang chang chang notifi listen chang notif chang event size code notif mai shown user code otherwis valid local non open notif notif config enabl config config blacklist config notif name config hidden displai notif notif clearabl && config non clearabl enabl displai non clearabl notif notif notif prioriti config notifi min prioriti displai low prioriti notif notif notif prioriti config notifi max prioriti displai high prioriti notif allow notif content text util empti notif titl text && text util empti notif titl big text && text util empti notif messag text && text util empti notif messag big text && notif messag text line filter complet wrong notif suppress lint api valid global non open notif notif initi init non context context non statu bar notification activ notif handler post runnabl suppress lint api run clear debug log tag initi notif list initi notif list proxi optim process complet us pre lollipop devic due lack children notif list notif pr task list arrai list activ notif length statu bar notif sbn activ notif open notif open notif sbn list add notif pr task context post devic lollipop api proxi optim pr task list proxi send pr task list list clear probabl need clear main notifi listen handler post runnabl suppress lint api run clear notifi listen clear notifi listen monitor check main thread debug log tag clear notif list notifi listen notifi listen proxi clear group summari clear list clear list clear notifi listen notifi listen event bath