copyright 2014 chep xda artemchep gmail com program free softwar redistribut modifi term gnu gener licens publish free softwar foundat either version licens option later version program distribut hope us without warranti without even impli warranti merchant fit particular purpos see gnu gener licens detail receiv copi gnu gener licens along program write free softwar foundat inc 51 franklin street fifth floor boston 02110 1301 usa com achep acdisplai ui activ keyguard manag admin devic polici manag content broadcast receiv content context content content filter handler power manag system clock support annot non support annot nullabl util log window manag com achep acdisplai com achep acdisplai com achep acdisplai timeout com achep acdisplai servic keyguard servic com achep acdisplai ui activ base base com achep base devic com achep base test check com achep base util keyguard util com achep base util toast util com achep base util log trace log com achep base util power power util com achep base build debug contain method emul system keyguard author artem chepurnoi keyguard base timeout timeout event tag keyguard option extra contain reason wake extra caus caus extra turn screen turn screen constant cyanogen mod specif noth stock prevent power kei 0x80000000 system ui basic flag devic kit kat api system ui flag hide navig system ui basic flag system ui flag low profil system ui flag fullscreen system ui flag hide navig system ui flag stabl unlock max time 150 pf max time 2000 broadcast receiv screen receiv keyguard manag keyguard manag unlock time resum extra caus timeout paus timeout timeout timeout handler handler handler power manag wake lock wake lock keyguard dismiss system ui visibl chang system ui window focu chang window focu window focu chang window focu debug log tag window focu chang window focu unlock window focu unlock time finish resum popul flag window focu updat system ui visibl hide nav bar option statu bar system ui visibl fake popul flag manual control window flag window manag param flag keep screen timeout delai config timeout normal manual control window add flag window flag timeout paus timeout resum timeout timeout delai timeout delai window clear flag window flag timeout paus timeout timeout delai timeout delai timeout paus creat state creat state debug log tag creat keyguard timeout regist keyguard manag keyguard manag system servic context keyguard servic regist screen event receiv flag handl intent wake extra flag window manag param flag turn screen extra caus extra extra caus fixm dev team broke dismiss keyguard flag http code googl com develop preview issu detail 1902 devic lollipop api && devic marshmallow api fine && keyguard manag keyguard secur window add flag flag request dismiss system keyguard window add flag flag show system keyguard window manag param flag show lock updat system ui visibl hide nav bar option statu bar decor window decor decor system ui visibl chang system ui system ui visibl chang system ui visibl chang system ui visibl fake decor post delai runnabl run visibl system ui basic flag system ui flag immers sticki config full screen visibl system ui flag fullscreen decor system ui visibl visibl 100 system ui visibl fake visibl system ui basic flag system ui flag immers config full screen visibl system ui flag fullscreen window decor system ui visibl visibl handl intent wake extra acquir wake lock extra caus extra extra caus attach window attach window handl intent wake extra acquir wake flag see releas wake lock acquir wake lock flag power manag acquir caus wakeup power manag screen dim wake lock power manag pm power manag system servic context power servic wake lock pm wake lock flag turn keyguard wake lock acquir 500 sec releas previous acquir link wake lock wake lock noth code held see acquir wake lock releas wake lock wake lock && wake lock held wake lock releas acquir wake flag window add flag window manag param flag turn screen code pass code includ link extra turn screen code code otherwis wake extra nullabl && extra extra turn screen detach window releas wake lock detach window destroi debug log tag destroi keyguard unregist screen event receiv timeout unregist timeout clear destroi regist receiv finish screen goe refresh window flag screen need link unregist screen event receiv unregist later see unregist screen event receiv regist screen event receiv screen receiv broadcast receiv receiv context context action action screen resum fake system ui visibl state chang updat flag system ui system ui visibl chang action screen keyguard servic activ power manag pm power manag context system servic context power servic pm wake lock power manag partial wake lock final keyguard acquir 200 keyguard finish filter filter filter filter add action action screen filter add action action screen filter prioriti filter system high prioriti max allow prioriti regist receiv screen receiv filter unregist screen receiv regist previous see regist screen event receiv unregist screen event receiv screen receiv unregist receiv screen receiv screen receiv start start send broadcast action state start resum debug log tag resum keyguard resum resum unlock time popul flag home press window add flag prevent power kei read system screen timeout set system screen timeout set system content resolv set system screen timeout set set found except system screen timeout send broadcast action state resum paus send broadcast action state paus window clear flag prevent power kei debug log tag paus keyguard resum popul flag home press handler remov callback messag paus stop stop workaround bug annoi bug drive crazi ac displai notif matter much time wait press power button directli go launcher turn screen lockscreen alwai read http plu googl com 110348136204265282325 post yf wu rptt2 keyguard dismiss set flag dismiss keyguard flag && finish otherwis flag turn screen && keyguard servic activ otherwis fine leav devic unlock && power util screen screen kill later debug log tag clear flag dismiss keyguard flag window clear flag window manag param flag dismiss keyguard keyguard dismiss send broadcast action state stop notifi xpose link com achep acdisplai plugin xpose home button modul start ignor home button press pleas notic ignor home button everywher call code home press param code start ignor code stop see com achep acdisplai plugin xpose home button see send broadcast content home press send broadcast action eat home press start action eat home press stop call code send broadcast action send broadcast non action send broadcast action user leav hint user leav hint debug log tag user leav user tri fool keyguard blame shall pass turn screen power util screen unlock log tag shall pass lock lock finish timeout event non timeout timeout event debug trace log tag timeout event event timeout event chang timeout event resum timeout paus run ui thread runnabl run timeout paus timeout event timeout check timeout paus lock lock devic turn screen code success code otherwis see devic polici manag lock lock devic polici manag dpm devic polici manag system servic context devic polici servic todo respect secur lock timeout set unlock time dpm lock secur except error messag fail lock screen due secur except toast util show error messag log tag error messag clear flag keep screen flag prevent situat ac displai stai forev normal never happen window clear flag window manag param flag keep screen screw owner unlock keyguard run link runnabl runnabl unlock unlock nullabl runnabl runnabl unlock runnabl unlock keyguard run link runnabl runnabl unlock param finish code finish code keep see unlock runnabl unlock nullabl runnabl runnabl finish debug log tag unlock param finish finish keyguard disabl need make delai call method unlock otherwis need delai flag appli system clock elaps realtim unlock time request dismiss system keyguard handler post runnabl run loop flag get appli todo us somewhat trigger detect unlock delta system clock elaps realtim lock && secur && delta unlock max time handler post delai 30 runnabl run ui thread runnabl finish perform unlock perform unlock unlock time system clock elaps realtim keyguard dismiss finish anim config unlock anim enabl && power save mode pend transit anim anim unlock set link window manag param flag dismiss keyguard flag mark link keyguard dismiss code request dismiss system keyguard window add flag window manag param flag dismiss keyguard keyguard dismiss return whether devic current lock requir pin pattern password unlock code devic lock code otherwis secur keyguard util devic lock keyguard manag whether keyguard present code devic lock code otherwis lock keyguard manag keyguard lock whether keyguard unlock code keyguard unlock atm code otherwis see unlock runnabl see pf max time unlock system clock elaps realtim unlock time pf max time caus extra caus non timeout timeout timeout back press back button